<!-- templates/posts/index.html Главная страница-->
{% extends 'base.html' %}

{% load thumbnail %}

  {% block title %}
    <title>{{ title_index  }}</title>
  {% endblock %} 

  {% block header %}
    <div class="container py-4">
      <h2>Последние обновления на сайте</h2>
    </div>
  {% endblock %}

    {% block content %}
      <div class="container py-1">      
        {% for post in page_obj %}
        <ul>
          <li>
            Автор: {{ post.author.get_full_name }}
            <p>
              <a href="{% url 'posts:profile' post.author %}">
                Все посты пользователя
              </a>
          </p>
          </li>
          <li>
            Дата публикации: {{ post.pub_date|date:"d E Y" }} г.
          </li>
          <li>
            {% if post.group %}
              Группа: {{ post.group.title }}
            {% else %}
              Группа: Нет группы
            {% endif %}
          </li>
          <li>
            Номера поста: {{ post.id}}
          </li>
        </ul>

        {% thumbnail post.image "960x339" crop="center" upscale=True as im %}
          <img class="card-img my-2" src="{{ im.url }}">
        {% endthumbnail %}

        <p>
          <b>Текст поста:</b> {{ post.text }}
        </p>
        <p>
          <a href="{% url 'posts:post_detail' post.id %}">
            Подробная информация о посте
          </a>
        </p>
           {% if post.group %}
             <a href="{% url 'posts:group' post.group.slug %}">
              Все записи группы: {{ post.group.title }}
             </a>
           {% endif %}
             {% if not forloop.last %}<hr>{% endif %}
          {% endfor %}
          <p>Всего постов на сайте:</b> {{posts_all_count}}</p>
         {% include 'posts/includes/paginator.html' %}
      </div>
    {% endblock %} 
